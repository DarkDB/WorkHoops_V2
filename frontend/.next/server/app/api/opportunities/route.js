"use strict";(()=>{var e={};e.id=956,e.ids=[956,331],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},30654:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>g,requestAsyncStorage:()=>c,routeModule:()=>l,serverHooks:()=>m,staticGenerationAsyncStorage:()=>d});var i={};r.r(i),r.d(i,{GET:()=>u});var a=r(49303),o=r(88716),n=r(60670),p=r(87070),s=r(72331);async function u(e){try{let{searchParams:t}=new URL(e.url),r=Math.max(1,parseInt(t.get("page")||"1")),i=await s.prisma.opportunity.findMany({where:{status:"publicada",publishedAt:{not:null}},include:{organization:{select:{name:!0,verified:!0}},author:{select:{name:!0}},_count:{select:{applications:!0,favorites:!0}}},orderBy:{publishedAt:"desc"},skip:(r-1)*12,take:12}),a=await s.prisma.opportunity.count({where:{status:"publicada",publishedAt:{not:null}}});return p.NextResponse.json({opportunities:i,pagination:{page:r,limit:12,total:a,pages:Math.ceil(a/12)}})}catch(e){return console.error("Error fetching opportunities:",e),p.NextResponse.json({message:"Error fetching opportunities",error:e.message},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/opportunities/route",pathname:"/api/opportunities",filename:"route",bundlePath:"app/api/opportunities/route"},resolvedPagePath:"/app/frontend/app/api/opportunities/route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:c,staticGenerationAsyncStorage:d,serverHooks:m}=l,h="/api/opportunities/route";function g(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:d})}},72331:(e,t,r)=>{r.d(t,{prisma:()=>a});var i=r(53524);let a=globalThis.prisma??new i.PrismaClient({log:["query"]})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[948,972],()=>r(30654));module.exports=i})();